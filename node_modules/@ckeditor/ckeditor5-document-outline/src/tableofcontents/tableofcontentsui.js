/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{ButtonView as _0x561f75,MenuBarMenuListItemButtonView as _0x21be80}from'ckeditor5/src/ui.js';import{CKEditorError as _0xebedc8}from'ckeditor5/src/utils.js';import{Plugin as _0x12d309}from'ckeditor5/src/core.js';import{icons as _0x4263d5}from'ckeditor5-collaboration/src/collaboration-core.js';export default class s extends _0x12d309{static get['pluginName'](){return'TableOfContentsUI';}constructor(_0x4d6f8f){super(_0x4d6f8f),this['_licenseKeyCheckInterval']=null;}['init'](){const _0x38a992=this['editor'];_0x38a992['ui']['componentFactory']['add']('tableOfContents',()=>{const _0x359cc4=this['_createButton'](_0x561f75);return _0x359cc4['tooltip']=!0x0,_0x359cc4;}),_0x38a992['ui']['componentFactory']['add']('menuBar:tableOfContents',()=>this['_createButton'](_0x21be80)),this['licenseKey']=_0x38a992['config']['get']('licenseKey');const _0x47dc84=this['editor'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0x2be355;for(const _0x216697 in _0x47dc84){const _0x57477c=_0x216697,_0xeb1a54=_0x47dc84[_0x57477c];if('tableOfContentsLicenseKeyTrial'===_0xeb1a54||'tableOfContentsLicenseKeyInvalid'===_0xeb1a54||'tableOfContentsLicenseKeyValid'===_0xeb1a54||'tableOfContentsLicenseKeyTrialLimit:operations'===_0xeb1a54){delete _0x47dc84[_0x57477c],_0x2be355=_0xeb1a54;break;}}if('tableOfContentsLicenseKeyInvalid'===_0x2be355)throw clearInterval(this['_licenseKeyCheckInterval']),new _0xebedc8('table-of-contents-invalid-license-key',null);if('tableOfContentsLicenseKeyTrial'===_0x2be355&&console['info']('You\x20are\x20using\x20the\x20trial\x20version\x20of\x20CKEditor\x205\x20table\x20of\x20contents\x20plugin\x20with\x20limited\x20usage.\x20Make\x20sure\x20you\x20will\x20not\x20use\x20it\x20in\x20the\x20production\x20environment.'),'tableOfContentsLicenseKeyTrialLimit:operations'===_0x2be355)throw clearInterval(this['_licenseKeyCheckInterval']),new _0xebedc8('table-of-contents-trial-license-key-reached-limit-changes',null);'tableOfContentsLicenseKeyValid'===_0x2be355&&clearInterval(this['_licenseKeyCheckInterval']);},0x3e8);}['_createButton'](_0x3d0b9e){const _0x172778=this['editor'],t=_0x172778['locale']['t'],_0x1752f5=_0x172778['commands']['get']('insertTableOfContents'),_0x44eff5=new _0x3d0b9e(_0x172778['locale']);return _0x44eff5['set']({'label':t('Table\x20of\x20contents'),'icon':_0x4263d5['tableOfContents']}),_0x44eff5['bind']('isEnabled')['to'](_0x1752f5,'isEnabled'),this['listenTo'](_0x44eff5,'execute',()=>{_0x172778['execute']('insertTableOfContents'),_0x172778['editing']['view']['focus']();}),_0x44eff5;}['destroy'](){this['_licenseKeyCheckInterval']&&clearInterval(this['_licenseKeyCheckInterval']);}}