/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0x5ebd(){const _0x149aa2=['getUserSessions','_registeredSessions','channelConnectedUsers','forEach','orderNumber','126384dJKneT','6592854KMXTdB','1637825WgqpUc','stopListening','getUser','73252SQSHOJ','connected','fire','_handleSessionAdd','connection','17362680zhHMMX','remove','clear','sessionId','add','sessionAdd:','user','values','has','isMe','sessions-register-already-registered','getUserBySessionId','Sessions','getUserRole','role','context','size','_createUser','change:state','pluginName','_uniqueUsersCount','addUser','_handleSessionRemove','_users','sessions-unregister-not-exist','plugins','2046454ywEOcf','listenTo','register','allConnectedUsers','35NNSHLP','set','delete','get','assign','init','1172850SyHAqH','defineMe','channelSessions','state','unregister','requires','mySessionId'];_0x5ebd=function(){return _0x149aa2;};return _0x5ebd();}const _0x4fc1fc=_0x445d;(function(_0x1ba20c,_0x258275){const _0x5be4a1=_0x445d,_0x3a3110=_0x1ba20c();while(!![]){try{const _0x42341c=-parseInt(_0x5be4a1(0xcf))/0x1+-parseInt(_0x5be4a1(0xb7))/0x2+parseInt(_0x5be4a1(0xcd))/0x3+-parseInt(_0x5be4a1(0xd2))/0x4*(-parseInt(_0x5be4a1(0xbb))/0x5)+parseInt(_0x5be4a1(0xce))/0x6+parseInt(_0x5be4a1(0xc1))/0x7+parseInt(_0x5be4a1(0xd7))/0x8;if(_0x42341c===_0x258275)break;else _0x3a3110['push'](_0x3a3110['shift']());}catch(_0x11380a){_0x3a3110['push'](_0x3a3110['shift']());}}}(_0x5ebd,0xe6f29));import{ContextPlugin as _0x346c19}from'ckeditor5/src/core.js';import{Collection as _0x4d3403,CKEditorError as _0xcf5265}from'ckeditor5/src/utils.js';function _0x445d(_0x53bbb3,_0x3e6781){const _0x5ebd72=_0x5ebd();return _0x445d=function(_0x445d11,_0xd5eea9){_0x445d11=_0x445d11-0x9e;let _0x27ead6=_0x5ebd72[_0x445d11];return _0x27ead6;},_0x445d(_0x53bbb3,_0x3e6781);}import _0x1e6e66 from'./websocketgateway.js';import{Users as _0x399080}from'ckeditor5-collaboration/src/collaboration-core.js';export default class r extends _0x346c19{static get[_0x4fc1fc(0xb0)](){const _0x3fd3b6=_0x4fc1fc;return _0x3fd3b6(0xa9);}static get[_0x4fc1fc(0xc6)](){return[_0x1e6e66,_0x399080];}constructor(_0x928d61){const _0x16d712=_0x4fc1fc;super(_0x928d61),this[_0x16d712(0xc3)]=new Map(),this[_0x16d712(0xca)]=new Map(),this[_0x16d712(0xba)]=new _0x4d3403(),this[_0x16d712(0xc9)]=new Map(),this[_0x16d712(0xb1)]=0x0,this[_0x16d712(0xb4)]=this[_0x16d712(0xac)][_0x16d712(0xb6)][_0x16d712(0xbe)](_0x399080);}[_0x4fc1fc(0xc0)](){const _0xa05cd8=_0x4fc1fc,_0x30eaee=this[_0xa05cd8(0xac)][_0xa05cd8(0xb6)][_0xa05cd8(0xbe)](_0x1e6e66);this[_0xa05cd8(0xb8)](_0x30eaee,_0xa05cd8(0xaf),(_0x369e99,_0x182cf7,_0x1691ef)=>{const _0xc5f535=_0xa05cd8;if(_0xc5f535(0xd3)!==_0x1691ef)this[_0xc5f535(0xc3)][_0xc5f535(0xcb)](_0x1af9a5=>_0x1af9a5[_0xc5f535(0x9f)]()),this[_0xc5f535(0xca)][_0xc5f535(0xcb)](_0x54b337=>_0x54b337[_0xc5f535(0x9f)]()),this[_0xc5f535(0xba)][_0xc5f535(0x9f)]();else{for(const [_0x18c713,_0x51754d]of this[_0xc5f535(0xc9)])for(const _0x10ebef of _0x51754d)this[_0xc5f535(0xd5)](_0x18c713,_0x10ebef);}}),this[_0xa05cd8(0xae)](_0x30eaee[_0xa05cd8(0xd6)]['me'],!0x0);}[_0x4fc1fc(0xb9)](_0x2ef1b4,_0x420e58){const _0x209077=_0x4fc1fc;if(this[_0x209077(0xc9)][_0x209077(0xa5)](_0x2ef1b4))throw new _0xcf5265(_0x209077(0xa7),null,{'channelId':_0x2ef1b4});this[_0x209077(0xc9)][_0x209077(0xbc)](_0x2ef1b4,_0x420e58),this[_0x209077(0xc3)][_0x209077(0xbc)](_0x2ef1b4,new _0x4d3403()),this[_0x209077(0xca)][_0x209077(0xbc)](_0x2ef1b4,new _0x4d3403()),this[_0x209077(0xb8)](_0x420e58,_0x209077(0xa1),(_0x4f029e,_0x2d0a3b)=>this[_0x209077(0xd5)](_0x2ef1b4,_0x2d0a3b)),this[_0x209077(0xb8)](_0x420e58,_0x209077(0x9e),(_0x5209f6,_0x54a6ce)=>this[_0x209077(0xb3)](_0x2ef1b4,_0x54a6ce));for(const _0x514a23 of _0x420e58)this[_0x209077(0xd5)](_0x2ef1b4,_0x514a23);}[_0x4fc1fc(0xc5)](_0x1d0f93){const _0x5ca707=_0x4fc1fc;if(!this[_0x5ca707(0xc9)][_0x5ca707(0xa5)](_0x1d0f93))throw new _0xcf5265(_0x5ca707(0xb5),null,{'channelId':_0x1d0f93});const _0x49b7f9=this[_0x5ca707(0xc9)][_0x5ca707(0xbe)](_0x1d0f93);this[_0x5ca707(0xd0)](_0x49b7f9);for(const _0x2451e5 of _0x49b7f9)_0x5ca707(0xd3)===this[_0x5ca707(0xac)][_0x5ca707(0xb6)][_0x5ca707(0xbe)](_0x1e6e66)[_0x5ca707(0xc4)]&&this[_0x5ca707(0xb3)](_0x1d0f93,_0x2451e5);this[_0x5ca707(0xc9)][_0x5ca707(0xbd)](_0x1d0f93),this[_0x5ca707(0xc3)][_0x5ca707(0xbd)](_0x1d0f93),this[_0x5ca707(0xca)][_0x5ca707(0xbd)](_0x1d0f93);}get[_0x4fc1fc(0xc7)](){const _0x231d2c=_0x4fc1fc;return this[_0x231d2c(0xac)][_0x231d2c(0xb6)][_0x231d2c(0xbe)](_0x1e6e66)[_0x231d2c(0xd6)][_0x231d2c(0xa0)];}[_0x4fc1fc(0xa8)](_0x10f38c){const _0x52d0c1=_0x4fc1fc;for(const _0x2ed295 of this[_0x52d0c1(0xc3)][_0x52d0c1(0xa4)]())for(const _0x1af25c of _0x2ed295)if(_0x1af25c['id']===_0x10f38c)return _0x1af25c[_0x52d0c1(0xa3)];}[_0x4fc1fc(0xc8)](_0x13e381,_0x317c3a){const _0x42ee0b=_0x4fc1fc,_0x5d86b7=_0x317c3a?[this[_0x42ee0b(0xc3)][_0x42ee0b(0xbe)](_0x317c3a)]:this[_0x42ee0b(0xc3)][_0x42ee0b(0xa4)](),_0x412b61=new Set();for(const _0x4bd528 of _0x5d86b7)for(const _0x495984 of _0x4bd528)_0x495984[_0x42ee0b(0xa3)]['id']===_0x13e381['id']&&_0x412b61[_0x42ee0b(0xa1)](_0x495984['id']);return _0x412b61;}[_0x4fc1fc(0xaa)](_0x4339e5){const _0x3abbe2=_0x4fc1fc;for(const _0x160ce4 of this[_0x3abbe2(0xc3)][_0x3abbe2(0xa4)]())for(const _0x2ef43f of _0x160ce4)if(_0x2ef43f[_0x3abbe2(0xa3)]===_0x4339e5)return _0x2ef43f[_0x3abbe2(0xab)];}[_0x4fc1fc(0xd5)](_0xcd72d9,_0x53a8ad){const _0x3785d4=_0x4fc1fc;if(_0x3785d4(0xd3)!==this[_0x3785d4(0xac)][_0x3785d4(0xb6)][_0x3785d4(0xbe)](_0x1e6e66)[_0x3785d4(0xc4)])return;const _0xa648e6=_0x53a8ad[_0x3785d4(0xa3)],_0x401a71=this[_0x3785d4(0xb4)][_0x3785d4(0xd1)](_0xa648e6['id'])||this[_0x3785d4(0xae)](_0xa648e6),_0x4b8a00=Object[_0x3785d4(0xbf)]({},_0x53a8ad,{'user':_0x401a71});this[_0x3785d4(0xc3)][_0x3785d4(0xbe)](_0xcd72d9)[_0x3785d4(0xa1)](_0x4b8a00);const _0x3e5777=this[_0x3785d4(0xca)][_0x3785d4(0xbe)](_0xcd72d9);_0x3e5777[_0x3785d4(0xa5)](_0x401a71['id'])||_0x3e5777[_0x3785d4(0xa1)](_0x401a71),this[_0x3785d4(0xba)][_0x3785d4(0xa5)](_0x401a71['id'])||this[_0x3785d4(0xba)][_0x3785d4(0xa1)](_0x401a71,_0x401a71[_0x3785d4(0xa6)]?0x0:void 0x0),this[_0x3785d4(0xd4)](_0x3785d4(0xa2)+_0xcd72d9,{'channelId':_0xcd72d9,'session':_0x4b8a00});}[_0x4fc1fc(0xb3)](_0x1fb25d,_0x2a14c3){const _0x59536d=_0x4fc1fc;if(_0x59536d(0xd3)!==this[_0x59536d(0xac)][_0x59536d(0xb6)][_0x59536d(0xbe)](_0x1e6e66)[_0x59536d(0xc4)])return;const _0x354bfc=this[_0x59536d(0xca)][_0x59536d(0xbe)](_0x1fb25d),_0x4c3688=_0x2a14c3[_0x59536d(0xa3)];_0x4c3688['id']&&(this[_0x59536d(0xc3)][_0x59536d(0xbe)](_0x1fb25d)[_0x59536d(0x9e)](_0x2a14c3['id']),_0x354bfc[_0x59536d(0xa5)](_0x4c3688['id'])&&!this[_0x59536d(0xc8)](_0x4c3688,_0x1fb25d)[_0x59536d(0xad)]&&_0x354bfc[_0x59536d(0x9e)](_0x4c3688['id']),this[_0x59536d(0xba)][_0x59536d(0xbe)](_0x4c3688['id'])&&!this[_0x59536d(0xc8)](_0x4c3688)[_0x59536d(0xad)]&&this[_0x59536d(0xba)][_0x59536d(0x9e)](_0x4c3688['id']));}[_0x4fc1fc(0xae)](_0x539083,_0x4d5d1){const _0x64f81=_0x4fc1fc,_0x29edbc=this[_0x64f81(0xb4)][_0x64f81(0xb2)](_0x539083);return _0x4d5d1&&this[_0x64f81(0xb4)][_0x64f81(0xc2)](_0x539083['id']),_0x29edbc[_0x64f81(0xcc)]=this[_0x64f81(0xb1)]++,_0x29edbc;}}