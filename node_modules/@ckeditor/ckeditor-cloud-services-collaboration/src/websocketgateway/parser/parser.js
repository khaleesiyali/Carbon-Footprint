/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Decoder as _0x5c3aa3,Encoder as _0x441e10,PacketType}from'socket.io-parser';import _0x1d7e3b from'./packetparser.js';import _0x3370e7 from'./parserutils.js';export const ENCODED_TYPES=/* #__PURE__ -- @preserve */
((()=>[PacketType['EVENT'],PacketType['ACK'],PacketType['BINARY_ACK'],PacketType['BINARY_EVENT']])());export class Encoder extends _0x441e10{constructor(_0x11b518){super(),this['_packetParser']=null!=_0x11b518?_0x11b518:new _0x1d7e3b();}['encode'](_0x348d8d){if(ENCODED_TYPES['includes'](_0x348d8d['type']))try{return[this['_packetParser']['encode'](_0x348d8d['type'],_0x348d8d['data'],_0x348d8d['id'],_0x348d8d['nsp'])];}catch(_0x397e6d){console['error']('Can\x20not\x20properly\x20serialize\x20or\x20deserialize\x20messages.\x20Check\x20the\x20original\x20error.',{'originalError':{'message':_0x397e6d['message']}});}return super['encode'](_0x348d8d);}}export class Decoder extends _0x5c3aa3{constructor(_0x21946f){super(),this['_packetParser']=null!=_0x21946f?_0x21946f:new _0x1d7e3b();}['add'](_0x4c05a4){if(!_0x3370e7['isBuffer'](_0x4c05a4))return super['add'](_0x4c05a4);let _0x261cca;try{_0x261cca=this['_packetParser']['decode'](_0x4c05a4)['packet'];}catch(_0x45072d){return super['add'](_0x4c05a4);}super['emitReserved']('decoded',_0x261cca);}}