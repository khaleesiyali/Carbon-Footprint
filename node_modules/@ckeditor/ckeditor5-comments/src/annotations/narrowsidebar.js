/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1e2494=_0x270d;(function(_0x5ea909,_0x3c1ade){const _0x1f2f41=_0x270d,_0x351cba=_0x5ea909();while(!![]){try{const _0x4847c3=-parseInt(_0x1f2f41(0x1ba))/0x1+-parseInt(_0x1f2f41(0x206))/0x2*(parseInt(_0x1f2f41(0x1c4))/0x3)+parseInt(_0x1f2f41(0x1d1))/0x4*(parseInt(_0x1f2f41(0x1ff))/0x5)+-parseInt(_0x1f2f41(0x1f7))/0x6*(-parseInt(_0x1f2f41(0x1ae))/0x7)+-parseInt(_0x1f2f41(0x20f))/0x8*(-parseInt(_0x1f2f41(0x1f3))/0x9)+parseInt(_0x1f2f41(0x1a0))/0xa*(-parseInt(_0x1f2f41(0x1c7))/0xb)+parseInt(_0x1f2f41(0x1a2))/0xc*(parseInt(_0x1f2f41(0x20c))/0xd);if(_0x4847c3===_0x3c1ade)break;else _0x351cba['push'](_0x351cba['shift']());}catch(_0xa5f1d8){_0x351cba['push'](_0x351cba['shift']());}}}(_0x5088,0x779da));import{ContextPlugin as _0x1cdffc,Context as _0x243c8f}from'ckeditor5/src/core.js';import _0x188961 from'./annotationsuis.js';function _0x270d(_0x347bfb,_0x461fc3){const _0x5088d9=_0x5088();return _0x270d=function(_0x270d1b,_0x1b1ddd){_0x270d1b=_0x270d1b-0x19d;let _0x23163e=_0x5088d9[_0x270d1b];return _0x23163e;},_0x270d(_0x347bfb,_0x461fc3);}function _0x5088(){const _0x47b2f7=['NarrowSidebar','isAttached','refresh','high','861kMhaQr','annotationType','content','6197147KRIKjx','cancel','_destroyEditorAnnotationsIntegration','addEventListener','getByView','activeAnnotation','Esc','context','plugins','focus','1118564mddHCQ','_detachFromContainer','resize','_annotationToNarrowView','getOrderedSelectedAnnotations','_showBalloon','setActiveAnnotation','first','preventDefault','from','keydown','pluginName','_selectedAnnotations','get','_domEmitter','element','values','bodyCollection','_updateBalloonPosition','has','target','listenTo','change:container','stop','_refreshPositioning','register','narrowsidebar-detach-not-attached','_hideBalloon','destroy','northArrowSouthEast','keyCode','change:height','add','editors','58185yqkzyt','focusableElements','northArrowSouth','annotations','24lwrvxw','blur','detachFromDom','hasDomSelection','removeEventListener','attachToDom','requires','unpin','5JZczrc','_integrateWithEditorAnnotations','EditorAnnotations','init','mousedown','clear','preventClosingBalloon','3250mKIaPW','southArrowNorth','low','_detachListeners','number','narrowsidebar-attach-already-attached','13XzZlbI','includes','southArrowNorthWest','696HfVxIC','southArrowNorthEast','create','isVisible','_attachToContainer','set:container','esc','_setSelectedAnnotations','ready','rearrange','execute','contains','locale','refreshPositioning','10dJHMuU','detach','7548564FEDmgW','northArrowSouthWest','ck-sidebar--narrow','uiUpdate','narrowSidebar','balloonPanelView','bind','isDirty','stopPropagation','_attachListeners','defaultPositions','pin','886284YwgFXG','view','set','find','off','_refreshPositioningDebounced','delete','getSidebarItemView','addAnnotation','_annotations','attach','type','457893tcPwhC','stopListening','remove','_manuallyClosedAnnotationViews','_editorAnnotations','length'];_0x5088=function(){return _0x47b2f7;};return _0x5088();}import _0x2f35c5 from'./sidebar.js';import _0x11c5e8 from'./view/annotationcounterbuttonview.js';import{BalloonPanelView as _0x1d74af,BodyCollection as _0x3ee0b3}from'ckeditor5/src/ui.js';import{CKEditorError as _0x50c40e,DomEmitterMixin as _0xf2dd54,keyCodes as _0x2b6db1,Collection as _0xe014ab}from'ckeditor5/src/utils.js';import'../../theme/sidebar-narrow.css';import{debounce as _0x1884f5}from'lodash-es';export default class i extends _0x1cdffc{static get[_0x1e2494(0x1fd)](){return[_0x2f35c5,_0x188961];}static get[_0x1e2494(0x1dc)](){const _0x464a3c=_0x1e2494;return _0x464a3c(0x1c0);}constructor(_0x45ecc8){const _0x1cbe46=_0x1e2494;super(_0x45ecc8),this[_0x1cbe46(0x1c1)]=!0x1,this[_0x1cbe46(0x1bd)]=new Set(),this[_0x1cbe46(0x1df)]=Object[_0x1cbe46(0x211)](_0xf2dd54),this[_0x1cbe46(0x1d4)]=new Map(),this[_0x1cbe46(0x1b0)](_0x1cbe46(0x1cc),null),this[_0x1cbe46(0x1f6)]=null,this[_0x1cbe46(0x1dd)]=[],this[_0x1cbe46(0x1be)]=new _0xe014ab(),this[_0x1cbe46(0x1b3)]=_0x1884f5(()=>{const _0x1f01a4=_0x1cbe46;this[_0x1f01a4(0x1e9)]();},0xfa,{'leading':!0x1});}[_0x1e2494(0x202)](){const _0x4b67f8=_0x1e2494;this[_0x4b67f8(0x1ce)][_0x4b67f8(0x1cf)][_0x4b67f8(0x1de)](_0x188961)[_0x4b67f8(0x1ea)](_0x4b67f8(0x1a6),this),this[_0x4b67f8(0x1e2)]=new _0x3ee0b3(this[_0x4b67f8(0x1ce)][_0x4b67f8(0x19e)]),this[_0x4b67f8(0x1a7)]=new _0x1d74af(this[_0x4b67f8(0x1ce)][_0x4b67f8(0x19e)]),this[_0x4b67f8(0x1e2)][_0x4b67f8(0x1fc)](),this[_0x4b67f8(0x1e2)][_0x4b67f8(0x1f1)](this[_0x4b67f8(0x1a7)]);}[_0x1e2494(0x1b8)](_0x545643){const _0x1c0bca=_0x1e2494;this[_0x1c0bca(0x1f6)]=_0x545643;const _0x11d874=this[_0x1c0bca(0x1ce)][_0x1c0bca(0x1cf)][_0x1c0bca(0x1de)](_0x2f35c5),_0x5da811=this[_0x1c0bca(0x1a7)];if(_0x11d874[_0x1c0bca(0x1b7)]=_0x545643,this[_0x1c0bca(0x1c1)])throw new _0x50c40e(_0x1c0bca(0x20b),this);this[_0x1c0bca(0x1c1)]=!0x0,this[_0x1c0bca(0x1e6)](_0x11d874,_0x1c0bca(0x214),()=>{const _0x43ce0a=_0x1c0bca;this[_0x43ce0a(0x1a1)](),this[_0x43ce0a(0x1e6)](_0x11d874,_0x43ce0a(0x1e7),_0x906b37=>{const _0xf2db92=_0x43ce0a;_0x906b37[_0xf2db92(0x1b2)](),this[_0xf2db92(0x1b8)](_0x545643);});}),_0x11d874[_0x1c0bca(0x213)]({'viewClass':_0x1c0bca(0x1a4),'spaceBetweenItems':0x5});const _0xda5e79=_0x5f2403=>{const _0xd7c049=_0x1c0bca,_0x5d37ac=new _0x11c5e8(this[_0xd7c049(0x1ce)][_0xd7c049(0x19e)]);_0x11d874[_0xd7c049(0x1b6)](_0x5f2403,_0x5d37ac),this[_0xd7c049(0x1d4)][_0xd7c049(0x1b0)](_0x5f2403,_0x5d37ac),_0x5d37ac[_0xd7c049(0x1a8)](_0xd7c049(0x1a9),_0xd7c049(0x1c5),_0xd7c049(0x20a))['to'](_0x5f2403[_0xd7c049(0x1af)],_0xd7c049(0x1a9),_0xd7c049(0x1b9),_0xd7c049(0x1bf)),_0x5d37ac['on'](_0xd7c049(0x219),()=>{const _0x2086fd=_0xd7c049;this[_0x2086fd(0x1bd)][_0x2086fd(0x204)](),_0x5da811[_0x2086fd(0x1c6)][_0x2086fd(0x1d8)]!==_0x5f2403[_0x2086fd(0x1af)]?(this[_0x2086fd(0x1d6)](_0x5f2403),_0x5f2403[_0x2086fd(0x1af)][_0x2086fd(0x1e0)][_0x2086fd(0x1d0)](),this[_0x2086fd(0x1d7)](_0x5f2403)):this[_0x2086fd(0x1d7)](null);});};for(const _0x378cc6 of _0x545643)_0xda5e79(_0x378cc6);this[_0x1c0bca(0x1e6)](_0x545643,_0x1c0bca(0x1f1),(_0x1ec5bc,_0x176703)=>{_0xda5e79(_0x176703);}),this[_0x1c0bca(0x1e6)](_0x545643,_0x1c0bca(0x1bc),(_0x5d84d7,_0x4d4da5,_0x2c9d53)=>{const _0x4287b9=_0x1c0bca;this[_0x4287b9(0x1d4)][_0x4287b9(0x1de)](_0x4d4da5)[_0x4287b9(0x1ed)](),this[_0x4287b9(0x1d4)][_0x4287b9(0x1b4)](_0x4d4da5),_0x11d874[_0x4287b9(0x218)]({'removedAnnotation':_0x4d4da5,'previousAnnotation':_0x545643[_0x4287b9(0x1de)](_0x2c9d53-0x1),'nextAnnotation':_0x545643[_0x4287b9(0x1de)](_0x2c9d53+0x1)}),_0x4d4da5===this[_0x4287b9(0x1cc)]&&this[_0x4287b9(0x1d7)](null);},{'priority':_0x1c0bca(0x208)}),this[_0x1c0bca(0x1e6)](_0x545643,_0x1c0bca(0x1d0),(_0xcb8eb8,_0x2ba990)=>{const _0xbec86c=_0x1c0bca;this[_0xbec86c(0x1d7)](_0x2ba990);}),this[_0x1c0bca(0x1e6)](_0x545643,_0x1c0bca(0x1f8),()=>{const _0x4c0de5=_0x1c0bca;this[_0x4c0de5(0x1d7)](null);}),this[_0x1c0bca(0x1df)][_0x1c0bca(0x1e6)](document,_0x1c0bca(0x1db),(_0x24f44a,_0x2d5930)=>{const _0x463566=_0x1c0bca;_0x2d5930[_0x463566(0x1ef)]===_0x2b6db1[_0x463566(0x215)]&&_0x5da811[_0x463566(0x212)]&&(this[_0x463566(0x1bd)][_0x463566(0x1f1)](_0x5da811[_0x463566(0x1c6)][_0x463566(0x1d8)]),this[_0x463566(0x1ec)](),_0x2d5930[_0x463566(0x1aa)](),_0x2d5930[_0x463566(0x1d9)]());}),this[_0x1c0bca(0x1df)][_0x1c0bca(0x1e6)](document,_0x1c0bca(0x203),(_0x3e14cc,_0x501653)=>{const _0x207769=_0x1c0bca,_0x1fc127=_0x501653[_0x207769(0x1e5)];_0x5da811[_0x207769(0x212)]&&_0x5da811[_0x207769(0x1e0)][_0x207769(0x19d)](_0x1fc127)||_0x11d874[_0x207769(0x1af)][_0x207769(0x1e0)][_0x207769(0x19d)](_0x1fc127)||_0x3e14cc[_0x207769(0x205)]||this[_0x207769(0x1cc)]&&this[_0x207769(0x1cc)][_0x207769(0x1f4)][_0x207769(0x1b1)](_0x3a8108=>_0x3a8108[_0x207769(0x19d)](_0x1fc127))||(this[_0x207769(0x1bd)][_0x207769(0x204)](),this[_0x207769(0x1ec)](),this[_0x207769(0x1d7)](null));});const _0x9b2018=this[_0x1c0bca(0x1ce)]instanceof _0x243c8f?this[_0x1c0bca(0x1ce)][_0x1c0bca(0x1f2)]:new _0xe014ab([this[_0x1c0bca(0x1ce)]]);for(const _0x10d8c4 of _0x9b2018)this[_0x1c0bca(0x200)](_0x10d8c4);this[_0x1c0bca(0x1e6)](_0x9b2018,_0x1c0bca(0x1f1),(_0x506652,_0x976e48)=>{const _0x34df6e=_0x1c0bca;this[_0x34df6e(0x1e6)](_0x976e48,_0x34df6e(0x217),()=>{const _0x3c223d=_0x34df6e;this[_0x3c223d(0x200)](_0x976e48);});}),this[_0x1c0bca(0x1e6)](_0x9b2018,_0x1c0bca(0x1bc),(_0x59f4e2,_0x3cab7c)=>{const _0x1f633c=_0x1c0bca;_0x3cab7c[_0x1f633c(0x1cf)][_0x1f633c(0x1e4)](_0x1f633c(0x201))&&this[_0x1f633c(0x1c9)](_0x3cab7c[_0x1f633c(0x1cf)][_0x1f633c(0x1de)](_0x1f633c(0x201)));}),window[_0x1c0bca(0x1ca)](_0x1c0bca(0x1d3),this[_0x1c0bca(0x1b3)]),this[_0x1c0bca(0x1e9)]();}[_0x1e2494(0x1d7)](_0x5cc096){const _0x54e736=_0x1e2494;if(_0x5cc096===this[_0x54e736(0x1cc)])return;const _0x1d2835=this[_0x54e736(0x1ce)][_0x54e736(0x1cf)][_0x54e736(0x1de)](_0x2f35c5);if(_0x1d2835[_0x54e736(0x1c2)]({'blurredAnnotation':this[_0x54e736(0x1cc)],'activatedAnnotation':_0x5cc096,'disableAnimationOnActivatedAnnotation':!0x0}),_0x5cc096)_0x1d2835[_0x54e736(0x1b5)](_0x5cc096)?this[_0x54e736(0x1d6)](_0x5cc096):this[_0x54e736(0x1ec)]();else this[_0x54e736(0x1ec)]();this[_0x54e736(0x1cc)]=_0x5cc096;}[_0x1e2494(0x1a1)](){const _0x28e44d=_0x1e2494;if(!this[_0x28e44d(0x1c1)])throw new _0x50c40e(_0x28e44d(0x1eb),this);this[_0x28e44d(0x1d7)](null);const _0x3e5d68=this[_0x28e44d(0x1ce)][_0x28e44d(0x1cf)][_0x28e44d(0x1de)](_0x2f35c5);this[_0x28e44d(0x1ec)](),Array[_0x28e44d(0x1da)](this[_0x28e44d(0x1d4)][_0x28e44d(0x1e1)](),_0xf9d685=>_0xf9d685[_0x28e44d(0x1ed)]()),this[_0x28e44d(0x1d4)][_0x28e44d(0x204)](),_0x3e5d68[_0x28e44d(0x1d2)](this[_0x28e44d(0x1f6)]),this[_0x28e44d(0x1bb)](),this[_0x28e44d(0x1df)][_0x28e44d(0x1bb)](),this[_0x28e44d(0x1ce)]instanceof _0x243c8f&&this[_0x28e44d(0x1bb)](this[_0x28e44d(0x1ce)][_0x28e44d(0x1f2)]);for(const _0x56e0fd of Array[_0x28e44d(0x1da)](this[_0x28e44d(0x1be)]))this[_0x28e44d(0x1c9)](_0x56e0fd);window[_0x28e44d(0x1fb)](_0x28e44d(0x1d3),this[_0x28e44d(0x1b3)]),this[_0x28e44d(0x1b3)][_0x28e44d(0x1c8)](),this[_0x28e44d(0x1dd)]=[],this[_0x28e44d(0x1c1)]=!0x1,this[_0x28e44d(0x1f6)]=null;}[_0x1e2494(0x1ed)](){const _0x8302a4=_0x1e2494;this[_0x8302a4(0x1c1)]&&this[_0x8302a4(0x1a1)](),this[_0x8302a4(0x1e2)][_0x8302a4(0x1f9)]();}[_0x1e2494(0x200)](_0x356f3c){const _0x4b0708=_0x1e2494;if(!_0x356f3c[_0x4b0708(0x1cf)][_0x4b0708(0x1e4)](_0x4b0708(0x201)))return;const _0x77f9ef=_0x356f3c[_0x4b0708(0x1cf)][_0x4b0708(0x1de)](_0x4b0708(0x201)),_0x2eb5e1=this[_0x4b0708(0x1ce)][_0x4b0708(0x1cf)][_0x4b0708(0x1de)](_0x2f35c5),_0x555694=this[_0x4b0708(0x1f6)],_0x4f25cb=this[_0x4b0708(0x1a7)],_0x1149a8=()=>{const _0x2399bf=_0x4b0708,_0x3646f5=_0x77f9ef[_0x2399bf(0x1d5)]({'annotations':this[_0x2399bf(0x1f6)],'activeAnnotation':this[_0x2399bf(0x1cc)]});this[_0x2399bf(0x216)](_0x3646f5),this[_0x2399bf(0x1d7)](_0x3646f5[0x0]||null);};this[_0x4b0708(0x1e6)](_0x77f9ef,_0x4b0708(0x1c2),_0x1149a8),this[_0x4b0708(0x1e6)](_0x77f9ef,_0x4b0708(0x1f8),(_0x1ea807,{isAnnotationTracked:_0x279790})=>{const _0x23371b=_0x4b0708;this[_0x23371b(0x1cc)]&&_0x279790(this[_0x23371b(0x1cc)])&&(this[_0x23371b(0x216)]([]),this[_0x23371b(0x1d7)](null));}),this[_0x4b0708(0x1e6)](_0x77f9ef,_0x4b0708(0x1a5),()=>{const _0x1935ba=_0x4b0708;this[_0x1935ba(0x1b3)]();}),this[_0x4b0708(0x1e6)](_0x555694,_0x4b0708(0x1f8),_0x524c0e=>{const _0x29a349=_0x4b0708;_0x77f9ef[_0x29a349(0x1fa)]()&&_0x524c0e[_0x29a349(0x1e8)]();},{'priority':_0x4b0708(0x1c3)}),this[_0x4b0708(0x1e6)](this[_0x4b0708(0x1df)],_0x4b0708(0x203),(_0x348b83,_0x1a513f)=>{const _0x1fd559=_0x4b0708,_0x199b14=_0x1a513f[_0x1fd559(0x1e5)];_0x4f25cb[_0x1fd559(0x212)]&&_0x4f25cb[_0x1fd559(0x1e0)][_0x1fd559(0x19d)](_0x199b14)||_0x2eb5e1[_0x1fd559(0x1af)][_0x1fd559(0x1e0)][_0x1fd559(0x19d)](_0x199b14)||this[_0x1fd559(0x1cc)]&&_0x77f9ef[_0x1fd559(0x1fa)]()&&(_0x1149a8(),_0x348b83[_0x1fd559(0x205)]=!0x0);},{'priority':_0x4b0708(0x1c3)}),this[_0x4b0708(0x1be)][_0x4b0708(0x1f1)](_0x77f9ef);}[_0x1e2494(0x1c9)](_0x202c2b){const _0x215a9f=_0x1e2494;_0x202c2b&&(this[_0x215a9f(0x1bb)](_0x202c2b),this[_0x215a9f(0x1be)][_0x215a9f(0x1bc)](_0x202c2b));}[_0x1e2494(0x216)](_0x4fd19f){const _0xef49ed=_0x1e2494;for(const _0x127273 of this[_0xef49ed(0x1dd)])_0x4fd19f[_0xef49ed(0x20d)](_0x127273)||this[_0xef49ed(0x1bd)][_0xef49ed(0x1b4)](_0x127273[_0xef49ed(0x1af)]);this[_0xef49ed(0x1dd)]=_0x4fd19f;}[_0x1e2494(0x1e9)](){const _0x2dea60=_0x1e2494,_0x23b11f=this[_0x2dea60(0x1a7)];this[_0x2dea60(0x1f6)][_0x2dea60(0x19f)](),_0x23b11f[_0x2dea60(0x212)]&&this[_0x2dea60(0x1e3)]();}[_0x1e2494(0x1d6)](_0x15039a){const _0x2d42ae=_0x1e2494;if(this[_0x2d42ae(0x1bd)][_0x2d42ae(0x1e4)](_0x15039a[_0x2d42ae(0x1af)]))return;const _0x217afc=this[_0x2d42ae(0x1a7)][_0x2d42ae(0x1c6)][_0x2d42ae(0x1d8)];_0x217afc!==_0x15039a[_0x2d42ae(0x1af)]?(_0x217afc&&this[_0x2d42ae(0x209)](_0x217afc),this[_0x2d42ae(0x1ab)](_0x15039a[_0x2d42ae(0x1af)]),this[_0x2d42ae(0x1a7)][_0x2d42ae(0x1c6)][_0x2d42ae(0x204)](),this[_0x2d42ae(0x1a7)][_0x2d42ae(0x1c6)][_0x2d42ae(0x1f1)](_0x15039a[_0x2d42ae(0x1af)]),this[_0x2d42ae(0x1e3)]()):this[_0x2d42ae(0x1e3)]();}[_0x1e2494(0x1e3)](){const _0xa70a83=_0x1e2494,_0x5ea2f2=this[_0xa70a83(0x1a7)][_0xa70a83(0x1c6)][_0xa70a83(0x1d8)],_0x5af7cf=_0x5ea2f2&&this[_0xa70a83(0x1f6)][_0xa70a83(0x1cb)](_0x5ea2f2);if(!_0x5af7cf||!this[_0xa70a83(0x1d4)][_0xa70a83(0x1e4)](_0x5af7cf))return;const _0x1557a0=this[_0xa70a83(0x1d4)][_0xa70a83(0x1de)](_0x5af7cf)[_0xa70a83(0x1e0)],_0x46aa8f=(function(){const _0x55840e=_0xa70a83,_0x509688=_0x1d74af[_0x55840e(0x1ac)];return[_0x509688[_0x55840e(0x210)],_0x509688[_0x55840e(0x1ee)],_0x509688[_0x55840e(0x207)],_0x509688[_0x55840e(0x1f5)],_0x509688[_0x55840e(0x20e)],_0x509688[_0x55840e(0x1a3)]];}());this[_0xa70a83(0x1a7)][_0xa70a83(0x1ad)]({'target':_0x1557a0,'positions':_0x46aa8f});}[_0x1e2494(0x1ec)](){const _0x3dca13=_0x1e2494,_0x3366bd=this[_0x3dca13(0x1a7)],_0x98cd58=_0x3366bd[_0x3dca13(0x1c6)][_0x3dca13(0x1d8)];_0x98cd58&&(this[_0x3dca13(0x209)](_0x98cd58),_0x3366bd[_0x3dca13(0x1fe)](),_0x3366bd[_0x3dca13(0x1c6)][_0x3dca13(0x204)]());}[_0x1e2494(0x1ab)](_0x10413c){const _0x1521bb=_0x1e2494;this[_0x1521bb(0x1e6)](_0x10413c,_0x1521bb(0x1f0),()=>this[_0x1521bb(0x1e3)]()),this[_0x1521bb(0x1e6)](_0x10413c,_0x1521bb(0x1cd),(_0x13c16f,_0x461fd6)=>{const _0x468ec4=_0x1521bb;this[_0x468ec4(0x1bd)][_0x468ec4(0x1f1)](_0x10413c),this[_0x468ec4(0x1ec)](),_0x461fd6();});}[_0x1e2494(0x209)](_0x16ec0b){const _0x4b78ab=_0x1e2494;this[_0x4b78ab(0x1bb)](_0x16ec0b);}}