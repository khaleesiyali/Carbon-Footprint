/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0x5238(_0x44d9c4,_0x492b3f){const _0x2911e2=_0x2911();return _0x5238=function(_0x523807,_0x430fa6){_0x523807=_0x523807-0xd1;let _0x552f2f=_0x2911e2[_0x523807];return _0x552f2f;},_0x5238(_0x44d9c4,_0x492b3f);}const _0x22d775=_0x5238;(function(_0x208fe2,_0x2c763d){const _0x4b4a7d=_0x5238,_0x2334d9=_0x208fe2();while(!![]){try{const _0x36758a=parseInt(_0x4b4a7d(0x10e))/0x1*(parseInt(_0x4b4a7d(0xe1))/0x2)+-parseInt(_0x4b4a7d(0xf3))/0x3*(-parseInt(_0x4b4a7d(0x10d))/0x4)+-parseInt(_0x4b4a7d(0x130))/0x5+-parseInt(_0x4b4a7d(0xd5))/0x6*(-parseInt(_0x4b4a7d(0xe4))/0x7)+-parseInt(_0x4b4a7d(0x112))/0x8*(parseInt(_0x4b4a7d(0x123))/0x9)+-parseInt(_0x4b4a7d(0x126))/0xa+parseInt(_0x4b4a7d(0x120))/0xb;if(_0x36758a===_0x2c763d)break;else _0x2334d9['push'](_0x2334d9['shift']());}catch(_0x4e2846){_0x2334d9['push'](_0x2334d9['shift']());}}}(_0x2911,0x3ed3d));import{ObservableMixin as _0x566f68}from'ckeditor5/src/utils.js';function _0x2911(){const _0x39ead1=['trim','prompt','endsWith','finishProcessing','stopProcessing','12EUNMOv','19gPhzIs','toModel','substring','_handleQuery','3416BKxJnW','ELEMENT_NODE','stopListening','isProcessing','_xmlSerializer','reverse','initialContext','nodeType','submitPrompt','startProcessing','name','createElement','abort','set','10266256QptHuE','listenTo','_sanitizeHTML','7137vkcFmV','div','destroy','4888280pnkfmP','processor','message','_domParser','toView','previousQuery','text/html','handleError','```html','_parseAndNormalizeContent','1707405YOEJrv','querySelector','rename','editor','_stripMarkdownSyntax','110634lTUeDb','once','push','previousLabel','editing','_sanitizationContainer','<h1></h1>','tryAgainEvent','innerHTML','from','_normalizeResponseHeadings','setContentOf','16586owEWRi','body','updateView','7KFKbdK','serializeToString','element','```','match','textAdapter','parseFromString','custom','document','remove','then','startsWith','previousActionId','_isH1TagSupportEnabled','currentContext','316959PDyloI','exec','makeRequest','htmlProcessor','viewToDom','childNodes','finally','stringify','isRendered','length','reset','catch','view','render','set:currentContext','mainAction','currentResponse','data','value','previousContext','domConverter'];_0x2911=function(){return _0x39ead1;};return _0x2911();}import{AIRequestError as _0x4c8e36}from'../adapters/aiadapter.js';import{Matcher as _0x48840a,UpcastWriter as _0x2cbbbd}from'ckeditor5/src/engine.js';const X=new RegExp(/^(.*?)<[a-zA-Z][a-zA-Z0-9_\-.]*[ >]/,'is');export default class k extends/* #__PURE__ -- @preserve */
_0x566f68(){constructor(_0x1dc3d8,_0x58f818,_0x19bc40){const _0x1629c8=_0x5238;super(),this[_0x1629c8(0xd3)]=_0x1dc3d8,this[_0x1629c8(0xe9)]=_0x58f818,this[_0x1629c8(0xda)]=document[_0x1629c8(0x11d)](_0x1629c8(0x124)),this[_0x1629c8(0x129)]=new DOMParser(),this[_0x1629c8(0x116)]=new XMLSerializer(),this[_0x1629c8(0xff)]=_0x19bc40,this[_0x1629c8(0x11f)]({'initialContext':'','currentContext':'','currentResponse':'','previousContext':void 0x0,'previousQuery':void 0x0,'previousLabel':void 0x0,'isProcessing':!0x1}),this['on'](_0x1629c8(0x101),(_0x3d7d5d,_0x23e1b5,_0x5cd571)=>{const _0x4ae53e=_0x1629c8;this[_0x4ae53e(0xff)][_0x4ae53e(0x105)]=this[_0x4ae53e(0x122)](_0x5cd571);}),this[_0x1629c8(0x121)](this[_0x1629c8(0xff)],_0x1629c8(0x11a),(_0x2de2e4,_0x40bdb5)=>{const _0x2a3c6f=_0x1629c8,_0x187612=this[_0x2a3c6f(0xf2)]||this[_0x2a3c6f(0x118)];this[_0x2a3c6f(0x111)](_0x40bdb5,_0x187612,_0x2a3c6f(0xeb));}),this[_0x1629c8(0x121)](this[_0x1629c8(0xff)],_0x1629c8(0xdc),()=>{const _0x53f226=_0x1629c8;this[_0x53f226(0xff)][_0x53f226(0x109)]=this[_0x53f226(0xd8)],this[_0x53f226(0x111)](this[_0x53f226(0x12b)],this[_0x53f226(0x106)],this[_0x53f226(0xf0)],this[_0x53f226(0xd8)]);}),this[_0x1629c8(0x121)](this[_0x1629c8(0xff)],_0x1629c8(0x10c),()=>{const _0x3b20b2=_0x1629c8;this[_0x3b20b2(0x10c)]();});}[_0x22d775(0x125)](){const _0x4fcdd2=_0x22d775;this[_0x4fcdd2(0x114)]();}async[_0x22d775(0xe3)]({actionId:_0x44cc2b,query:_0x3d6746,htmlContent:_0x4a6b19,label:_0x8d0480,mainActionLabel:_0xbe0aa4}){const _0x572586=_0x22d775;this[_0x572586(0xff)][_0x572586(0x109)]=_0x8d0480,this[_0x572586(0xff)][_0x572586(0x102)]=_0xbe0aa4,this[_0x572586(0x118)]=_0x4a6b19,_0x3d6746&&(this[_0x572586(0xff)][_0x572586(0xfb)]?this[_0x572586(0x111)](_0x3d6746,_0x4a6b19,_0x44cc2b,_0x8d0480):this[_0x572586(0xff)][_0x572586(0xd6)](_0x572586(0x100),()=>{const _0x416ed3=_0x572586;this[_0x416ed3(0x111)](_0x3d6746,_0x4a6b19,_0x44cc2b,_0x8d0480);}));}[_0x22d775(0x10c)](){const _0x57603c=_0x22d775;this[_0x57603c(0x115)]&&(this[_0x57603c(0x115)]=!0x1,this[_0x57603c(0xff)][_0x57603c(0x10b)](),this[_0x57603c(0xe9)][_0x57603c(0x11e)]());}[_0x22d775(0xfd)](){const _0x4ee634=_0x22d775;this[_0x4ee634(0x118)]='',this[_0x4ee634(0xf2)]='',this[_0x4ee634(0x103)]='',this[_0x4ee634(0x106)]='',this[_0x4ee634(0x12b)]='',this[_0x4ee634(0xd8)]='',this[_0x4ee634(0xf0)]=void 0x0,this[_0x4ee634(0xff)][_0x4ee634(0xfd)](),this[_0x4ee634(0x10c)]();}async[_0x22d775(0x111)](_0x59622f,_0x241386,_0x3c0bc3,_0xcbbb5e){const _0x15c4d4=_0x22d775;return this[_0x15c4d4(0x115)]=!0x0,this[_0x15c4d4(0xff)][_0x15c4d4(0x11b)](),this[_0x15c4d4(0x106)]=_0x241386,this[_0x15c4d4(0x12b)]=_0x59622f,this[_0x15c4d4(0xd8)]=_0xcbbb5e||_0x59622f,this[_0x15c4d4(0xf0)]=_0x3c0bc3,new Promise(_0x478590=>{const _0x41a0ec=_0x15c4d4;this[_0x41a0ec(0xe9)][_0x41a0ec(0xf5)]({'query':_0x59622f,'context':_0x241386,'onData':_0x4abec3=>{const _0x26852c=_0x41a0ec;this[_0x26852c(0x103)]=_0x4abec3,this[_0x26852c(0xf2)]=this[_0x26852c(0x12f)](this[_0x26852c(0x103)]);},'actionId':_0x3c0bc3})[_0x41a0ec(0xee)](()=>{const _0x216cc8=_0x41a0ec;!this[_0x216cc8(0xf2)]&&this[_0x216cc8(0x103)]&&(this[_0x216cc8(0xf2)]=this[_0x216cc8(0x12f)](this[_0x216cc8(0x103)],!0x0));})[_0x41a0ec(0xfe)](_0x5937a1=>{const _0x19713d=_0x41a0ec;_0x5937a1 instanceof _0x4c8e36?this[_0x19713d(0xff)][_0x19713d(0x12d)](_0x5937a1[_0x19713d(0x128)]):this[_0x19713d(0xff)][_0x19713d(0x12d)](),_0x478590();})[_0x41a0ec(0xf9)](()=>{const _0x472d83=_0x41a0ec;this[_0x472d83(0x10c)](),_0x478590();});});}[_0x22d775(0x12f)](_0x437950,_0x1ae18b=!0x1){const _0x47bd25=_0x22d775,_0x4e09db=X[_0x47bd25(0xf4)](_0x437950);_0x437950=_0x4e09db?_0x437950[_0x47bd25(0x110)](_0x4e09db[0x1][_0x47bd25(0xfc)]):_0x437950[_0x47bd25(0xfc)]<0x64&&!_0x1ae18b?'':this[_0x47bd25(0xd4)](_0x437950);const _0x1adc04=this[_0x47bd25(0x129)][_0x47bd25(0xea)](_0x437950,_0x47bd25(0x12c));if(_0x4e09db){const _0x29590b=Array[_0x47bd25(0xde)](_0x1adc04[_0x47bd25(0xe2)][_0x47bd25(0xf8)]);_0x29590b[_0x47bd25(0x117)]();for(const _0x27262e of _0x29590b){if(_0x27262e[_0x47bd25(0x119)]==Node[_0x47bd25(0x113)])break;_0x27262e[_0x47bd25(0xed)]();}}const _0x32203e=this[_0x47bd25(0xd3)][_0x47bd25(0x104)][_0x47bd25(0x127)][_0x47bd25(0x12a)](this[_0x47bd25(0x116)][_0x47bd25(0xe5)](_0x1adc04[_0x47bd25(0xe2)]));return this[_0x47bd25(0xf1)]()||this[_0x47bd25(0xdf)](_0x32203e),this[_0x47bd25(0xd3)][_0x47bd25(0x104)][_0x47bd25(0xfa)](this[_0x47bd25(0xd3)][_0x47bd25(0x104)][_0x47bd25(0x10f)](_0x32203e));}[_0x22d775(0xdf)](_0x482bab){const _0x48512f=_0x22d775,_0x11189e=new _0x2cbbbd(this[_0x48512f(0xd3)][_0x48512f(0xd9)][_0x48512f(0xff)][_0x48512f(0xec)]),_0x4e5f98=new _0x48840a({'name':/^h[1-5]$/}),_0x2d0b26=[];let _0x17f497=!0x1;for(const _0x5678fd of _0x482bab)_0x5678fd['is'](_0x48512f(0xe6))&&_0x4e5f98[_0x48512f(0xe8)](_0x5678fd)&&(_0x2d0b26[_0x48512f(0xd7)](_0x5678fd),'h1'==_0x5678fd[_0x48512f(0x11c)]&&(_0x17f497=!0x0));if(_0x17f497){for(const _0x54eec2 of _0x2d0b26)_0x11189e[_0x48512f(0xd2)]('h'+(parseInt(_0x54eec2[_0x48512f(0x11c)][0x1])+0x1),_0x54eec2);}}[_0x22d775(0xf1)](){const _0x383a80=_0x22d775,{data:_0x483e14,editing:_0x74ea25}=this[_0x383a80(0xd3)],_0x27cbe7=_0x483e14[_0x383a80(0xf6)][_0x383a80(0x12a)](_0x383a80(0xdb)),_0xbb4466=_0x483e14[_0x383a80(0x12a)](_0x483e14[_0x383a80(0x10f)](_0x27cbe7));return!!_0x74ea25[_0x383a80(0xff)][_0x383a80(0x107)][_0x383a80(0xf7)](_0xbb4466)[_0x383a80(0xd1)]('h1');}[_0x22d775(0x122)](_0x1b33a9){const _0x597c6d=_0x22d775;return this[_0x597c6d(0xd3)][_0x597c6d(0xd9)][_0x597c6d(0xff)][_0x597c6d(0x107)][_0x597c6d(0xe0)](this[_0x597c6d(0xda)],_0x1b33a9),this[_0x597c6d(0xda)][_0x597c6d(0xdd)];}[_0x22d775(0xd4)](_0x2d4738){const _0x31eb7c=_0x22d775,_0x1c404e=_0x2d4738[_0x31eb7c(0x108)]();return _0x1c404e[_0x31eb7c(0xef)](_0x31eb7c(0x12e))?_0x1c404e[_0x31eb7c(0x10a)](_0x31eb7c(0xe7))?_0x1c404e[_0x31eb7c(0x110)](0x7,_0x1c404e[_0x31eb7c(0xfc)]-0x3):_0x1c404e[_0x31eb7c(0x110)](0x7):_0x2d4738;}}