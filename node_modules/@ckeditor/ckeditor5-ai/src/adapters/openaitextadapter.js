/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0x54f6(_0x420fc1,_0x46dbaa){const _0x15ac76=_0x15ac();return _0x54f6=function(_0x54f6a9,_0x572646){_0x54f6a9=_0x54f6a9-0x159;let _0x1d1832=_0x15ac76[_0x54f6a9];return _0x1d1832;},_0x54f6(_0x420fc1,_0x46dbaa);}const _0xdbfdc6=_0x54f6;(function(_0x4bfade,_0x201cd7){const _0x39afb0=_0x54f6,_0x4c7e89=_0x4bfade();while(!![]){try{const _0x3f14d0=parseInt(_0x39afb0(0x183))/0x1+-parseInt(_0x39afb0(0x195))/0x2+parseInt(_0x39afb0(0x182))/0x3+parseInt(_0x39afb0(0x194))/0x4*(parseInt(_0x39afb0(0x17b))/0x5)+-parseInt(_0x39afb0(0x19b))/0x6+-parseInt(_0x39afb0(0x18f))/0x7*(-parseInt(_0x39afb0(0x186))/0x8)+-parseInt(_0x39afb0(0x17a))/0x9;if(_0x3f14d0===_0x201cd7)break;else _0x4c7e89['push'](_0x4c7e89['shift']());}catch(_0x1c84ef){_0x4c7e89['push'](_0x4c7e89['shift']());}}}(_0x15ac,0x642be));function _0x15ac(){const _0x523d97=['710838GdeeLr','211875afocNC','get','body','2124856FKpyfp','stringify','gpt-3.5-turbo','system','resolve','content','ai.openAI.requestHeaders','delta','filter','7TdCQaY','_prepareRequestHeaders','editor','stream','context_length_exceeded','43188PtEENi','238102tekkgr','abortController','length','ai.openAI.requestParameters','user','locale','1479804BcIwuV','message','getReader','json','AI_ERROR_MODERATION','text','prepareMessages','_readStaticResponse','Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a','Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','pluginName','https://api.openai.com/v1/chat/completions','parse','replace','Instruction:\x0a','read','config','ai.openAI.apiUrl','[DONE]','join','_cleanUpData','_requestParameters','_readStreamableResponse','decode','_prepareRequestParameters','data:\x20','POST','Moderation','_isBufferIncomplete','signal','sendRequest','split','_apiUrl','AI_ERROR_CONTEXT_LENGTH','define','29007DJFZtN','30hQHTJU','includes','choices','reject','OpenAITextAdapter','map','_requestHeaders'];_0x15ac=function(){return _0x523d97;};return _0x15ac();}import{default as _0x5f21fd}from'./aitextadapter.js';import{AIRequestError as _0xecbf50}from'./aiadapter.js';import{getTranslation as _0x4c7b67}from'../utils/common-translations.js';export default class F extends _0x5f21fd{static get[_0xdbfdc6(0x161)](){const _0x1001a7=_0xdbfdc6;return _0x1001a7(0x17f);}constructor(_0x505698){const _0x4f4df1=_0xdbfdc6;super(_0x505698),_0x505698[_0x4f4df1(0x167)][_0x4f4df1(0x179)](_0x4f4df1(0x168),_0x4f4df1(0x162)),_0x505698[_0x4f4df1(0x167)][_0x4f4df1(0x184)](_0x4f4df1(0x198))||_0x505698[_0x4f4df1(0x167)][_0x4f4df1(0x179)](_0x4f4df1(0x198),{'model':_0x4f4df1(0x188),'max_tokens':0x7d0,'temperature':0x1,'top_p':0x1,'stream':!0x0}),this[_0x4f4df1(0x177)]=_0x505698[_0x4f4df1(0x167)][_0x4f4df1(0x184)](_0x4f4df1(0x168)),this[_0x4f4df1(0x181)]=_0x505698[_0x4f4df1(0x167)][_0x4f4df1(0x184)](_0x4f4df1(0x18c))||{},this[_0x4f4df1(0x16c)]=_0x505698[_0x4f4df1(0x167)][_0x4f4df1(0x184)](_0x4f4df1(0x198));}async[_0xdbfdc6(0x175)]({query:_0x4fed97,context:_0x31f0d1,onData:_0x594f23,actionId:_0x2f09a1}){const _0xd6e19=_0xdbfdc6,_0x383f7f=this[_0xd6e19(0x191)][_0xd6e19(0x19a)],_0x107a14=await this[_0xd6e19(0x15c)](_0x4fed97,_0x31f0d1,_0x2f09a1),_0x1cc2f7=await this[_0xd6e19(0x190)](this[_0xd6e19(0x181)],_0x2f09a1),_0x2b2656=await this[_0xd6e19(0x16f)](this[_0xd6e19(0x16c)],_0x2f09a1),_0x434b01={'messages':_0x107a14,..._0x2b2656},_0x30ca92={'method':_0xd6e19(0x171),'headers':_0x1cc2f7,'body':JSON[_0xd6e19(0x187)](_0x434b01),'signal':this[_0xd6e19(0x196)][_0xd6e19(0x174)]},_0x23766e=await fetch(this[_0xd6e19(0x177)],_0x30ca92);if(_0x23766e['ok'])return _0x2b2656[_0xd6e19(0x192)]?await this[_0xd6e19(0x16d)](_0x23766e,_0x594f23):await this[_0xd6e19(0x15d)](_0x23766e,_0x594f23),Promise[_0xd6e19(0x18a)]();{const _0x43b08f=await _0x23766e[_0xd6e19(0x15b)]();return _0x43b08f[_0xd6e19(0x17c)](_0xd6e19(0x193))?Promise[_0xd6e19(0x17e)](new _0xecbf50(_0x4c7b67(_0x383f7f,_0xd6e19(0x178)))):_0x43b08f[_0xd6e19(0x17c)](_0xd6e19(0x172))?Promise[_0xd6e19(0x17e)](new _0xecbf50(_0x4c7b67(_0x383f7f,_0xd6e19(0x15a)))):Promise[_0xd6e19(0x17e)](new Error(_0x43b08f));}}async[_0xdbfdc6(0x15c)](_0x49916d,_0x3e34ce,_0x102132){const _0x5dfb3f=_0xdbfdc6;let _0x1601fd,_0x4eb81c;return _0x3e34ce?(_0x1601fd=_0x5dfb3f(0x160),_0x4eb81c=_0x5dfb3f(0x165)+_0x49916d+_0x5dfb3f(0x15f)+_0x3e34ce):(_0x1601fd=_0x5dfb3f(0x15e),_0x4eb81c=_0x49916d),[{'role':_0x5dfb3f(0x189),'content':_0x1601fd},{'role':_0x5dfb3f(0x199),'content':_0x4eb81c}];}async[_0xdbfdc6(0x16d)](_0x40f2c,_0x61e7d1){const _0x4f9892=_0xdbfdc6,_0x3a63da=_0x40f2c[_0x4f9892(0x185)][_0x4f9892(0x19d)](),_0x5203e6=new TextDecoder();let _0x3e524f='',_0x1da476='',_0x565b34='',_0x1d215a=!0x1;for(;!_0x1d215a;){const {done:_0x41a7b4,value:_0x5a271d}=await _0x3a63da[_0x4f9892(0x166)](),_0x4a77fe=_0x3e524f+_0x5203e6[_0x4f9892(0x16e)](_0x5a271d);let _0x26cb1a='';_0x1d215a=_0x41a7b4;try{_0x26cb1a=this[_0x4f9892(0x16b)](_0x4a77fe),_0x3e524f='';}catch(_0x4a3609){_0x3e524f=_0x4a77fe;continue;}_0x1da476+=_0x26cb1a,!_0x1d215a&&this[_0x4f9892(0x173)](_0x1da476)||_0x1da476&&(_0x565b34+=_0x1da476,_0x1da476='',_0x61e7d1(_0x565b34));}return Promise[_0x4f9892(0x18a)]();}async[_0xdbfdc6(0x15d)](_0x158dbc,_0x3a21a8){const _0xd386a9=_0xdbfdc6;return _0x3a21a8((await _0x158dbc[_0xd386a9(0x159)]())[_0xd386a9(0x17d)][0x0][_0xd386a9(0x19c)][_0xd386a9(0x18b)]),Promise[_0xd386a9(0x18a)]();}[_0xdbfdc6(0x173)](_0x594016){const _0x24612c=_0xdbfdc6,_0x26df67=_0x594016[_0x24612c(0x176)]('<')[_0x24612c(0x197)]!==_0x594016[_0x24612c(0x176)]('>')[_0x24612c(0x197)],_0x582ee8=_0x594016[_0x24612c(0x197)]<0x1e;return _0x26df67&&_0x582ee8;}[_0xdbfdc6(0x16b)](_0x565553){const _0x10c20d=_0xdbfdc6;return _0x565553[_0x10c20d(0x176)](/\n(?![^{]*\})/g)[_0x10c20d(0x180)](_0x522e48=>_0x522e48[_0x10c20d(0x164)](_0x10c20d(0x170),''))[_0x10c20d(0x18e)](_0x36e350=>_0x36e350&&_0x36e350[_0x10c20d(0x197)]>0x0&&_0x10c20d(0x169)!==_0x36e350)[_0x10c20d(0x180)](_0x4bdedf=>{const _0x1150f2=_0x10c20d,{choices:_0x2664c9}=JSON[_0x1150f2(0x163)](_0x4bdedf);if(_0x2664c9[0x0]&&_0x2664c9[0x0][_0x1150f2(0x18d)]&&_0x2664c9[0x0][_0x1150f2(0x18d)][_0x1150f2(0x18b)])return _0x2664c9[0x0][_0x1150f2(0x18d)][_0x1150f2(0x18b)];})[_0x10c20d(0x18e)](_0x1e1821=>_0x1e1821)[_0x10c20d(0x16a)]('');}}